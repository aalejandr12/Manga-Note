<!DOCTYPE html>
<html class="dark" lang="es">
<head>
    <meta charset="utf-8"/>
    <meta content="width=device-width, initial-scale=1.0" name="viewport"/>
    <title>Mi Biblioteca - Manga & Yaoi</title>
    <script src="https://cdn.tailwindcss.com?plugins=forms,container-queries"></script>
    <link href="https://fonts.googleapis.com/css2?family=Plus+Jakarta+Sans:wght@400;500;700;800&display=swap" rel="stylesheet"/>
    <link href="https://fonts.googleapis.com/css2?family=Material+Symbols+Outlined" rel="stylesheet"/>
    <script>
        tailwind.config = {
            darkMode: "class",
            theme: {
                extend: {
                    colors: {
                        "primary": "#7f19e6",
                        "background-light": "#f7f6f8",
                        "background-dark": "#191121",
                    },
                    fontFamily: {
                        "display": ["Plus Jakarta Sans", "sans-serif"]
                    },
                    borderRadius: {
                        "DEFAULT": "0.25rem",
                        "lg": "0.5rem",
                        "xl": "0.75rem",
                        "full": "9999px"
                    },
                },
            },
        }
    </script>
    <style>
        .material-symbols-outlined {
            font-variation-settings: 'FILL' 0, 'wght' 400, 'GRAD' 0, 'opsz' 24
        }
        .loading-shimmer {
            background: linear-gradient(90deg, #2a2a2a 25%, #3a3a3a 50%, #2a2a2a 75%);
            background-size: 200% 100%;
            animation: shimmer 1.5s infinite;
        }
        @keyframes shimmer {
            0% { background-position: 200% 0; }
            100% { background-position: -200% 0; }
        }
    </style>
</head>
<body class="bg-background-light dark:bg-background-dark font-display text-gray-800 dark:text-gray-200">
<div class="relative flex h-auto min-h-screen w-full flex-col group/design-root overflow-x-hidden">
<div class="layout-container flex h-full grow flex-col">
<div class="flex flex-1 justify-center">
<div class="layout-content-container flex flex-col w-full max-w-4xl flex-1">
    
    <!-- TopNavBar -->
    <header class="sticky top-0 z-50 bg-background-light dark:bg-background-dark flex items-center justify-between whitespace-nowrap border-b border-solid border-gray-200 dark:border-b-[#362447] px-4 sm:px-6 py-4">
        <div class="flex items-center gap-3 text-gray-800 dark:text-white">
            <div class="text-primary w-6 h-6">
                <svg fill="currentColor" viewbox="0 0 48 48" xmlns="http://www.w3.org/2000/svg">
                    <path d="M44 11.2727C44 14.0109 39.8386 16.3957 33.69 17.6364C39.8386 18.877 44 21.2618 44 24C44 26.7382 39.8386 29.123 33.69 30.3636C39.8386 31.6043 44 33.9891 44 36.7273C44 40.7439 35.0457 44 24 44C12.9543 44 4 40.7439 4 36.7273C4 33.9891 8.16144 31.6043 14.31 30.3636C8.16144 29.123 4 26.7382 4 24C4 21.2618 8.16144 18.877 14.31 17.6364C8.16144 16.3957 4 14.0109 4 11.2727C4 7.25611 12.9543 4 24 4C35.0457 4 44 7.25611 44 11.2727Z"></path>
                </svg>
            </div>
            <h2 class="text-xl font-bold leading-tight tracking-[-0.015em]">Mi Biblioteca</h2>
        </div>
        <div class="flex flex-1 justify-end gap-2">
            <label class="flex flex-col !h-10 w-40 sm:w-48">
                <div class="flex w-full flex-1 items-stretch rounded-lg h-full">
                    <div class="text-gray-400 dark:text-[#ad93c8] flex border-none bg-gray-100 dark:bg-[#362447] items-center justify-center pl-3 rounded-l-lg border-r-0">
                        <span class="material-symbols-outlined">search</span>
                    </div>
                    <input id="searchInput" class="form-input flex w-full min-w-0 flex-1 resize-none overflow-hidden rounded-lg text-gray-800 dark:text-white focus:outline-0 focus:ring-0 border-none bg-gray-100 dark:bg-[#362447] focus:border-none h-full placeholder:text-gray-400 placeholder:dark:text-[#ad93c8] px-4 rounded-l-none border-l-0 pl-2 text-base font-normal leading-normal" placeholder="Buscar..." value=""/>
                </div>
            </label>
        </div>
    </header>

    <main class="flex-1 pb-28">
        <!-- Stats Cards (Mobile) -->
        <div class="p-4 grid grid-cols-3 gap-2 sm:hidden" id="statsContainer">
            <div class="bg-gradient-to-br from-primary/20 to-primary/10 dark:from-primary/30 dark:to-primary/10 rounded-lg p-3 text-center">
                <p class="text-2xl font-bold text-primary dark:text-white" id="totalSeries">0</p>
                <p class="text-xs text-gray-600 dark:text-gray-400">Manga</p>
            </div>
            <div class="bg-gradient-to-br from-blue-500/20 to-blue-500/10 rounded-lg p-3 text-center">
                <p class="text-2xl font-bold text-blue-600 dark:text-blue-400" id="totalVolumes">0</p>
                <p class="text-xs text-gray-600 dark:text-gray-400">Proceso</p>
            </div>
            <div class="bg-gradient-to-br from-green-500/20 to-green-500/10 rounded-lg p-3 text-center">
                <p class="text-2xl font-bold text-green-600 dark:text-green-400" id="completedVolumes">0</p>
                <p class="text-xs text-gray-600 dark:text-gray-400">Leído</p>
            </div>
        </div>

        <!-- Chips/Filters -->
        <div class="flex gap-3 p-4 overflow-x-auto">
            <div class="filter-chip active flex h-9 shrink-0 items-center justify-center gap-x-2 rounded-lg px-4 cursor-pointer" data-filter="all">
                <p class="text-sm font-medium leading-normal">Todos</p>
            </div>
            <div class="filter-chip flex h-9 shrink-0 items-center justify-center gap-x-2 rounded-lg px-4 cursor-pointer" data-filter="pending">
                <p class="text-sm font-medium leading-normal">En Espera</p>
            </div>
            <div class="filter-chip flex h-9 shrink-0 items-center justify-center gap-x-2 rounded-lg px-4 cursor-pointer" data-filter="reading">
                <p class="text-sm font-medium leading-normal">Continuar</p>
            </div>
            <div class="filter-chip flex h-9 shrink-0 items-center justify-center gap-x-2 rounded-lg px-4 cursor-pointer" data-filter="completed">
                <p class="text-sm font-medium leading-normal">Terminado</p>
            </div>
        </div>

        <!-- Loading State -->
        <div id="loadingState" class="grid grid-cols-2 sm:grid-cols-3 md:grid-cols-4 gap-4 p-4">
            <div class="flex flex-col gap-2" v-for="i in 8">
                <div class="loading-shimmer rounded-lg aspect-[3/4]"></div>
                <div class="loading-shimmer h-4 rounded w-3/4"></div>
            </div>
        </div>

        <!-- Empty State -->
        <div id="emptyState" class="hidden flex-col items-center justify-center p-12 text-center">
            <span class="material-symbols-outlined text-6xl text-gray-400 dark:text-gray-600 mb-4">auto_stories</span>
            <h3 class="text-xl font-bold text-gray-700 dark:text-gray-300 mb-2">No hay mangas aún</h3>
            <p class="text-gray-500 dark:text-gray-500 mb-6">Comienza subiendo tu primer PDF</p>
            <button onclick="window.location.href='/upload'" class="flex items-center gap-2 px-6 py-3 bg-primary text-white rounded-lg font-medium">
                <span class="material-symbols-outlined">upload</span>
                Subir PDF
            </button>
        </div>

        <!-- Library Grid -->
        <div id="libraryGrid" class="hidden grid grid-cols-2 sm:grid-cols-3 md:grid-cols-4 gap-4 p-4">
            <!-- Content will be inserted here by JavaScript -->
        </div>
    </main>

    <!-- FAB (Floating Action Button) -->
    <div class="fixed bottom-6 right-6 z-10">
        <button onclick="window.location.href='/upload'" class="flex max-w-[480px] cursor-pointer items-center justify-center overflow-hidden rounded-full shadow-lg h-14 w-14 bg-primary text-white hover:bg-primary/90 transition-all">
            <span class="material-symbols-outlined text-3xl">add</span>
        </button>
    </div>

</div>
</div>
</div>
</div>

<script src="https://cdnjs.cloudflare.com/ajax/libs/pdf.js/3.11.174/pdf.min.js"></script>
<script>
    // Configurar PDF.js worker
    pdfjsLib.GlobalWorkerOptions.workerSrc = 'https://cdnjs.cloudflare.com/ajax/libs/pdf.js/3.11.174/pdf.worker.min.js';
</script>
<script src="/js/library.js"></script>
<script src="/js/auto-cover-generator.js"></script>
</body>
</html>
